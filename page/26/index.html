<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222"/>
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2"/>

<link rel="stylesheet" href="/css/main.css?v=7.1.1"/>


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="john's tech blog">
<meta property="og:url" content="http://yoursite.com/page/26/index.html">
<meta property="og:site_name" content="john's tech blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="john's tech blog">
<meta name="twitter:description">





  
  
  <link rel="canonical" href="http://yoursite.com/page/26/"/>



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>john's tech blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">john's tech blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">hope is coming</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br/>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br/>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br/>归档</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/30/jquery-attr/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="john's tech blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/12/30/jquery-attr/" class="post-title-link" itemprop="url">jquery_attr</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-12-30 22:07:48" itemprop="dateCreated datePublished" datetime="2016-12-30T22:07:48+08:00">2016-12-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-07 20:32:35" itemprop="dateModified" datetime="2019-05-07T20:32:35+08:00">2019-05-07</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="jquery1-0-attr-函数分析"><a href="#jquery1-0-attr-函数分析" class="headerlink" title="jquery1.0 attr 函数分析"></a>jquery1.0 attr 函数分析</h2><p>先上代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">attr: <span class="function"><span class="keyword">function</span>(<span class="params"> key, value, type </span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Check to see if we're setting style values</span></span><br><span class="line">  <span class="comment">//检查是否是设置属性</span></span><br><span class="line">  <span class="keyword">return</span> key.constructor != <span class="built_in">String</span> || value != <span class="literal">undefined</span> ?</span><br><span class="line">    <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="comment">// See if we're setting a hash of styles</span></span><br><span class="line">      <span class="comment">//key是一个对象</span></span><br><span class="line">      <span class="comment">//例如 &#123; "width":“15px”&#125;</span></span><br><span class="line">      <span class="keyword">if</span> ( value == <span class="literal">undefined</span> )</span><br><span class="line">        <span class="comment">// Set all the styles</span></span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">var</span> prop <span class="keyword">in</span> key )</span><br><span class="line">          jQuery.attr(</span><br><span class="line">            type ? <span class="keyword">this</span>.style : <span class="keyword">this</span>,</span><br><span class="line">            prop, key[prop]</span><br><span class="line">          );</span><br><span class="line"></span><br><span class="line">      <span class="comment">// See if we're setting a single key/value style</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        jQuery.attr(</span><br><span class="line">          type ? <span class="keyword">this</span>.style : <span class="keyword">this</span>,<span class="comment">//这边的this已经是dom对象</span></span><br><span class="line">          key, value</span><br><span class="line">        );</span><br><span class="line">    &#125;) :</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Look for the case where we're accessing a style value</span></span><br><span class="line">    <span class="comment">//读取属性值 css -&gt;调用静态方法jQuery.curCSS</span></span><br><span class="line">    jQuery[ type || <span class="string">"attr"</span> ]( <span class="keyword">this</span>[<span class="number">0</span>], key );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="jquery1-0-静态-attr函数"><a href="#jquery1-0-静态-attr函数" class="headerlink" title="jquery1.0 静态 attr函数"></a>jquery1.0 静态 attr函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">attr: <span class="function"><span class="keyword">function</span>(<span class="params">elem, name, value</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> fix = &#123;</span><br><span class="line">    <span class="string">"for"</span>: <span class="string">"htmlFor"</span>,</span><br><span class="line">    <span class="string">"class"</span>: <span class="string">"className"</span>,</span><br><span class="line">    <span class="string">"float"</span>: <span class="string">"cssFloat"</span>,</span><br><span class="line">    <span class="attr">innerHTML</span>: <span class="string">"innerHTML"</span>,</span><br><span class="line">    <span class="attr">className</span>: <span class="string">"className"</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> ( fix[name] ) &#123;</span><br><span class="line">    <span class="keyword">if</span> ( value != <span class="literal">undefined</span> ) elem[fix[name]] = value;</span><br><span class="line">    <span class="keyword">return</span> elem[fix[name]];</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> ( elem.getAttribute ) &#123;</span><br><span class="line">    <span class="keyword">if</span> ( value != <span class="literal">undefined</span> ) elem.setAttribute( name, value );</span><br><span class="line">    <span class="keyword">return</span> elem.getAttribute( name, <span class="number">2</span> );</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    name = name.replace(<span class="regexp">/-([a-z])/ig</span>,<span class="function"><span class="keyword">function</span>(<span class="params">z,b</span>)</span>&#123;<span class="keyword">return</span> b.toUpperCase();&#125;);</span><br><span class="line">    <span class="keyword">if</span> ( value != <span class="literal">undefined</span> ) elem[name] = value;</span><br><span class="line">    <span class="keyword">return</span> elem[name];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从中我们可以学到如下几点：</p>
<blockquote>
<p>jquery.each方法</p>
</blockquote>
<blockquote>
<p>jquery静态方法的调用</p>
</blockquote>
<blockquote>
<p>dom是如何给元素设置属性的</p>
</blockquote>
<blockquote>
<p>一个函数中既包含设置又包含读取的功能</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/30/jquery-wrap/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="john's tech blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/12/30/jquery-wrap/" class="post-title-link" itemprop="url">jquery_wrap</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-12-30 21:47:01" itemprop="dateCreated datePublished" datetime="2016-12-30T21:47:01+08:00">2016-12-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-07 20:32:35" itemprop="dateModified" datetime="2019-05-07T20:32:35+08:00">2019-05-07</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="jquery1-0-wrap函数分析"><a href="#jquery1-0-wrap函数分析" class="headerlink" title="jquery1.0 wrap函数分析"></a>jquery1.0 wrap函数分析</h2><p>先上代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">wrap: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// The elements to wrap the target around</span></span><br><span class="line">  <span class="comment">//包装目标元素的元素</span></span><br><span class="line">  <span class="keyword">var</span> a = jQuery.clean(<span class="built_in">arguments</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Wrap each of the matched elements individually</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// Clone the structure that we're using to wrap</span></span><br><span class="line">    <span class="keyword">var</span> b = a[<span class="number">0</span>].cloneNode(<span class="literal">true</span>);<span class="comment">//选择a[0]元素</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Insert it before the element to be wrapped</span></span><br><span class="line">          <span class="comment">//在当前元素之前插入包装节点</span></span><br><span class="line">    <span class="keyword">this</span>.parentNode.insertBefore( b, <span class="keyword">this</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Find he deepest point in the wrap structure</span></span><br><span class="line">    <span class="comment">//找出最深的第一个包装的元素</span></span><br><span class="line">    <span class="keyword">while</span> ( b.firstChild )</span><br><span class="line">      b = b.firstChild;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Move the matched element to within the wrap structure</span></span><br><span class="line">    <span class="comment">//把匹配的当前元素移动到包装元素内</span></span><br><span class="line">    b.appendChild( <span class="keyword">this</span> );</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从中我们可以学到以下几点：</p>
<blockquote>
<p>dom元素的操作</p>
</blockquote>
<blockquote>
<p>jquery.clean方法的应用</p>
</blockquote>
<p>关于jquery.clean方法我们已经在之前<a href="http://johnwonder.github.io/2016/09/05/jquery-clean/" target="_blank" rel="external">这篇博客</a>中分析过</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/29/slf4j_MDC/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="john's tech blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/12/29/slf4j_MDC/" class="post-title-link" itemprop="url">slf4j_MDC</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-12-29 16:50:56" itemprop="dateCreated datePublished" datetime="2016-12-29T16:50:56+08:00">2016-12-29</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-09 20:37:48" itemprop="dateModified" datetime="2019-05-09T20:37:48+08:00">2019-05-09</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="slf4j-MDC"><a href="#slf4j-MDC" class="headerlink" title="slf4j MDC"></a>slf4j MDC</h1><p>A lighter technique consists of uniquely stamping each log request servicing a given client. Neil Harrison described this method in the book Patterns for Logging Diagnostic Messages in Pattern Languages of Program Design 3, edited by R. Martin, D. Riehle, and F. Buschmann (Addison-Wesley, 1997).</p>
<p>Logback leverages a variant of this technique included in the SLF4J API: Mapped Diagnostic Contexts (MDC).</p>
<p>在分布式系统中，各种无关日志穿行其中，导致我们可能无法直接定位整个操作流程。因此，我们可能需要对一个用户的操作流程进行归类标记，比如使用线程+时间戳，或者用户身份标识等；如此，我们可以从大量日志信息中grep出某个用户的操作流程，或者某个时间的流转记录。</p>
<p>因此，这就有了 Slf4j MDC 方法</p>
<p>转载自<a href="http://www.ithao123.cn/content-8291525.html" target="_blank" rel="external">Slf4j MDC 使用和 基于 Logback 的实现分析</a></p>
<p><a href="http://www.cnblogs.com/dumuqiao/p/3654702.html?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">LogBack sl4j 通过MDC实现日志记录区分用户Session</a></p>
<h2 id="slf4j-api-MDC类"><a href="#slf4j-api-MDC类" class="headerlink" title="slf4j-api MDC类"></a>slf4j-api MDC类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">   *内部静态类</span><br><span class="line">   * An adapter to remove the key when done.</span><br><span class="line">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MDCCloseable</span> <span class="keyword">implements</span> <span class="title">Closeable</span> </span>&#123;</span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">final</span> String key;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">private</span> <span class="title">MDCCloseable</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">          <span class="keyword">this</span>.key = key;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          MDC.remove(<span class="keyword">this</span>.key);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>Java中的类可以是static吗？答案是可以。在java中我们可以有静态实例变量、静态方法、静态块。类也可以是静态的</p>
<p>静态内部类只能访问外部类的静态成员</p>
<p>静态内部类和非静态内部类之间到底有什么不同呢？下面是两者间主要的不同。</p>
<blockquote>
<p>内部静态类不需要有指向外部类的引用。但非静态内部类需要持有对外部类的引用。</p>
</blockquote>
<blockquote>
<p>非静态内部类能够访问外部类的静态和非静态成员。静态类不能访问外部类的非静态成员。他只能访问外部类的静态成员。</p>
</blockquote>
<blockquote>
<p>一个非静态内部类不能脱离外部类实体被创建，一个非静态内部类可以访问外部类的数据和方法，因为他就在外部类里面。</p>
</blockquote>
<p>参考资料:<br><a href="http://www.cnblogs.com/kissazi2/p/3971065.html" target="_blank" rel="external">java中的Static class</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/29/angularjs-minError/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="john's tech blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/12/29/angularjs-minError/" class="post-title-link" itemprop="url">angularjs源码剖析之minErr函数</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-12-29 16:09:25" itemprop="dateCreated datePublished" datetime="2016-12-29T16:09:25+08:00">2016-12-29</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-16 21:21:32" itemprop="dateModified" datetime="2019-05-16T21:21:32+08:00">2019-05-16</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="angular1-5-8-minErr函数"><a href="#angular1-5-8-minErr函数" class="headerlink" title="angular1.5.8 minErr函数"></a>angular1.5.8 minErr函数</h2><p>在运行过程中如果angularjs脚本出现错误,那么在浏览器控制台我们可以看到自定义的错误信息，<br>这些信息就是通过这个函数输出的。</p>
<h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>angular.js内部代码有如下用法：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ngMinErr  = minErr(<span class="string">'ng'</span>) <span class="comment">//代表是ng模块的错误</span></span><br></pre></td></tr></table></figure>
<h3 id="函数解读"><a href="#函数解读" class="headerlink" title="函数解读"></a>函数解读</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span><br><span class="line">  * @description  描述</span><br><span class="line">  * 这个对象提供一个用于angular创建富错误信息的能力</span><br><span class="line">  * This object provides a utility for producing rich Error messages within</span><br><span class="line">  * Angular. It can be called as follows:</span><br><span class="line">  *</span><br><span class="line">  * 使用方法</span><br><span class="line">  * var exampleMinErr = minErr('example');</span><br><span class="line">  * throw exampleMinErr('one', 'This &#123;0&#125; is &#123;1&#125;', foo, bar);</span><br><span class="line">  *</span><br><span class="line">  * The above creates an instance of minErr in the example namespace. The</span><br><span class="line">  * resulting error will have a namespaced error code of example.one.  The</span><br><span class="line">  * resulting error will replace &#123;0&#125; with the value of foo, and &#123;1&#125; with the</span><br><span class="line">  * value of bar. The object is not restricted in the number of arguments it can</span><br><span class="line">  * take.</span><br><span class="line">  *</span><br><span class="line">  *如果传入比需要少点的参数，那么多出来的参数会保存起来</span><br><span class="line">  * If fewer arguments are specified than necessary for interpolation, the extra</span><br><span class="line">  * interpolation markers will be preserved in the final string.</span><br><span class="line">  *由于数据在生成过程中会被静态解析,在minErr实例创建和调用的过程中一些约束被适当的应用。</span><br><span class="line">  * Since data will be parsed statically during a build step, some restrictions</span><br><span class="line">  * are applied with respect to how minErr instances are created and called.</span><br><span class="line">  * Instances should have names of the form namespaceMinErr for a minErr created</span><br><span class="line">  * using minErr('namespace') .</span><br><span class="line">  * 错误代码，命名空间和模板字符串都应该是静态字符串，不能是变量和生成的表达式</span><br><span class="line">  * Error codes, namespaces and template strings</span><br><span class="line">  * should all be static strings, not variables or general expressions.</span><br><span class="line">  *</span><br><span class="line">  * @param &#123;string&#125; module The namespace to use for the new minErr instance.</span><br><span class="line"></span><br><span class="line">  *在angular.js 16314行 定义了一个如下Err 其中就传入了TypeError 对象</span><br><span class="line">  * var $qMinErr = minErr('$q', TypeError);</span><br><span class="line"></span><br><span class="line">  * line 16413</span><br><span class="line">  *$qMinErr(</span><br><span class="line">  *        'qcycle',</span><br><span class="line">  *        "Expected promise to be resolved with value other than itself '&#123;0&#125;'",</span><br><span class="line">  *        val)</span><br><span class="line"></span><br><span class="line">  * Promise解读</span><br><span class="line">  * 相关链接 http://lib.csdn.net/article/angularjs/33116</span><br><span class="line">  * @param &#123;function&#125; ErrorConstructor Custom error constructor to be instantiated when returning</span><br><span class="line">  *   error from returned function, for cases when a particular type of error is useful.</span><br><span class="line">  * @returns &#123;function(code:string, template:string, ...templateArgs): Error&#125; minErr instance</span><br><span class="line">  */</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">minErr</span>(<span class="params">module, ErrorConstructor</span>) </span>&#123;</span><br><span class="line">      ErrorConstructor = ErrorConstructor || <span class="built_in">Error</span>;<span class="comment">//如果没有提供Error构造函数，就用默认的Error</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//返回真正可以使用的函数</span></span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> SKIP_INDEXES = <span class="number">2</span>;<span class="comment">//跳过的索引</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> templateArgs = <span class="built_in">arguments</span>,<span class="comment">//函数传入的参数</span></span><br><span class="line">          code = templateArgs[<span class="number">0</span>],<span class="comment">//第一个参数：错误代码</span></span><br><span class="line">          message = <span class="string">'['</span> + (<span class="built_in">module</span> ? <span class="built_in">module</span> + <span class="string">':'</span> : <span class="string">''</span>) + code + <span class="string">'] '</span>,<span class="comment">//初始化错误消息</span></span><br><span class="line">          template = templateArgs[<span class="number">1</span>],<span class="comment">//第二个参数：模板</span></span><br><span class="line">          paramPrefix, i;</span><br><span class="line"></span><br><span class="line">        message += template.replace(<span class="regexp">/\&#123;\d+\&#125;/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">match</span>) </span>&#123;</span><br><span class="line">          <span class="comment">//slice &#123;0&#125; 就提取出0</span></span><br><span class="line">          <span class="comment">//slice &#123;1&#125; 就提取出1</span></span><br><span class="line">          <span class="comment">//比如 "Unknown provider: &#123;0&#125;"就提取出&#123;0&#125;</span></span><br><span class="line">          <span class="keyword">var</span> index = +match.slice(<span class="number">1</span>, <span class="number">-1</span>),<span class="comment">//相当于把&#123;&#125;去掉</span></span><br><span class="line">            shiftedIndex = index + SKIP_INDEXES;<span class="comment">//根据参数顺序要跳过2个</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (shiftedIndex &lt; templateArgs.length) &#123;</span><br><span class="line">            <span class="comment">// shiftedIndex 是 从 SKIP_INDEXES 开始计算的</span></span><br><span class="line">            <span class="comment">// 因为第一个参数为 错误代码 ，第二个参数为 模板</span></span><br><span class="line">            <span class="comment">//相当于格式化参数</span></span><br><span class="line">            <span class="keyword">return</span> toDebugString(templateArgs[shiftedIndex]);</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">return</span> match;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        message += <span class="string">'\nhttp://errors.angularjs.org/1.5.8/'</span> +</span><br><span class="line">          (<span class="built_in">module</span> ? <span class="built_in">module</span> + <span class="string">'/'</span> : <span class="string">''</span>) + code;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = SKIP_INDEXES, paramPrefix = <span class="string">'?'</span>; i &lt; templateArgs.length; i++, paramPrefix = <span class="string">'&amp;'</span>) &#123;</span><br><span class="line">          message += paramPrefix + <span class="string">'p'</span> + (i - SKIP_INDEXES) + <span class="string">'='</span> +</span><br><span class="line">            <span class="built_in">encodeURIComponent</span>(toDebugString(templateArgs[i]));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ErrorConstructor(message);</span><br><span class="line">      &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* global toDebugString: true */</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">serializeObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> seen = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关于JSON.stringify</span></span><br><span class="line">    <span class="comment">//https://developer.mozilla.org/zh-CN/docs/Using_native_JSON</span></span><br><span class="line">    <span class="comment">//该参数可以是多种类型,如果是一个函数,则它可以改变一个javascript对象在字符串化过程中的行为,</span></span><br><span class="line">    <span class="comment">//如果是一个包含 String 和 Number 对象的数组,则它将作为一个白名单.</span></span><br><span class="line">    <span class="comment">//只有那些键存在域该白名单中的键值对才会被包含进最终生成的JSON字符串中.如果该参数值为null或者被省略,则所有的键值对都会被包含进最终生成的JSON字符串中.</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(obj, <span class="function"><span class="keyword">function</span>(<span class="params">key, val</span>) </span>&#123;</span><br><span class="line">      val = toJsonReplacer(key, val);</span><br><span class="line">      <span class="keyword">if</span> (isObject(val)) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (seen.indexOf(val) &gt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="string">'...'</span>;<span class="comment">//变成省略号</span></span><br><span class="line"></span><br><span class="line">        seen.push(val);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> val;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//输出调试信息</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">toDebugString</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj === <span class="string">'function'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> obj.toString().replace(<span class="regexp">/ \&#123;[\s\S]*$/</span>, <span class="string">''</span>);<span class="comment">//把函数体去掉</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isUndefined(obj)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'undefined'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">'string'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> serializeObject(obj);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>从这个函数中我们可以学到以下几点</p>
<blockquote>
<p>函数内部返回函数</p>
</blockquote>
<blockquote>
<p>javascript slice的用法</p>
</blockquote>
<blockquote>
<p>javascript replace 加正则的用法</p>
</blockquote>
<blockquote>
<p>函数的包装</p>
</blockquote>
<blockquote>
<p>对象的序列化 通过JSON.stringify</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/29/slf4j_log4j/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="john's tech blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/12/29/slf4j_log4j/" class="post-title-link" itemprop="url">log4j_cannot_log_in_tomcat</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-12-29 14:05:34" itemprop="dateCreated datePublished" datetime="2016-12-29T14:05:34+08:00">2016-12-29</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-09 20:37:34" itemprop="dateModified" datetime="2019-05-09T20:37:34+08:00">2019-05-09</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="slf4j-日志配置"><a href="#slf4j-日志配置" class="headerlink" title="slf4j 日志配置"></a>slf4j 日志配置</h2><p>前几天遇到了一个奇怪的问题，log4j在程序调试时是可以输出到日志文件中的，但是放到tomcat下却只生成到了tomcat自带的日志文件stdout中</p>
<p>log4j 配置如下：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#开发</span></span><br><span class="line">  log4j.<span class="attribute">rootLogger</span>=ALL,CONSOLE,FILE,OUT,FILEERROR,FILEWARN</span><br><span class="line">  #正式</span><br><span class="line">  #log4j.<span class="attribute">rootLogger</span>=CONSOLE,FILE,OUT,FILEERROR,FILEWARN</span><br><span class="line">  log4j.logger.com.mchange.v2.log.<span class="attribute">MLog</span>=ALL</span><br><span class="line">  og4j.logger.<span class="attribute">slick</span>=WARN,ERROR</span><br><span class="line">  log4j.logger.com.<span class="attribute">ht</span>=ALL</span><br><span class="line">  log4j.logger.akka.<span class="attribute">http</span>=WARN,ERROR</span><br><span class="line">  log4j.logger.org.<span class="attribute">reflections</span>=ERROR</span><br><span class="line">  log4j.logger.<span class="attribute">kafka</span>=ERROR,WARN</span><br><span class="line">  log4j.logger.org.apache.<span class="attribute">zookeeper</span>=ERROR,WARN</span><br><span class="line">  log4j.logger.org.I0Itec.<span class="attribute">zkclient</span>=ERROR,WARN</span><br><span class="line"></span><br><span class="line">  log4j.appender.<span class="attribute">CONSOLE</span>=org.apache.log4j.ConsoleAppender</span><br><span class="line">  log4j.appender.CONSOLE.<span class="attribute">Target</span>=System.out</span><br><span class="line">  log4j.appender.CONSOLE.<span class="attribute">layout</span>=org.apache.log4j.PatternLayout</span><br><span class="line">  log4j.appender.CONSOLE.layout.<span class="attribute">ConversionPattern</span>=%d %-5p [%F(%L)] %m%n</span><br><span class="line"></span><br><span class="line">  log4j.appender.<span class="attribute">FILE</span>=org.apache.log4j.RollingFileAppender  </span><br><span class="line">  log4j.appender.FILE.<span class="attribute">File</span>=./logs/db.log</span><br><span class="line">  log4j.appender.FILE.<span class="attribute">Append</span>=<span class="literal">true</span></span><br><span class="line">  log4j.appender.FILE.<span class="attribute">DatePattern</span>=<span class="string">'.'</span>yyyy-MM-dd'.log'</span><br><span class="line">  log4j.appender.FILE.<span class="attribute">layout</span>=org.apache.log4j.PatternLayout</span><br><span class="line">  log4j.appender.FILE.layout.<span class="attribute">ConversionPattern</span>=%d %-5p [%c(%L)] %m%n</span><br><span class="line">  log4j.appender.FILE.<span class="attribute">MaxFileSize</span>=10240KB</span><br><span class="line">  log4j.appender.FILE.<span class="attribute">MaxBackupIndex</span>=1000</span><br><span class="line">  log4j.appender.FILE.Threshold = DEBUG</span><br></pre></td></tr></table></figure>
<p>于是排查了几天，期间也参照tomcat官方的说法把tomcat打日志的方式改成log4j，但是后来发现这只是把tomcat的日志按照log4j的形式输出而已，<br>根本的问题还是没有解决，就是在上述配置的db.log或者out.log中都没有程序中输出的日志。</p>
<p>当看到stackoverflow上得这个<a href="http://stackoverflow.com/questions/24356319/log4j-creates-log-file-but-does-not-write-to-it" target="_blank" rel="external">问题</a>后，似乎有了一点眉头：</p>
<p>The output seems to be of the default format that Java’s standard logging framework (JUL) would emit.<br>So, there are two possibilities (that come to mind):<br>Your code imports java.util.logging.Logger, rather than org.apache.log4j.Logger.<br>There exists a library of some sort, in your classpath, that intercepts Log4J calls and converts them to JUL calls.</p>
<p>最后一句话引起了我的注意，因为我的lib中还引入了logback-classic-1.1.3.jar,logback-core-1.1.3.jar两个包。</p>
<p>死马当活马医，我把这两个包删除，然后再重启tomcat,结果DEBUG信息就正常写入了db.log中。</p>
<p>参考的资料有：<br><a href="http://www.tuicool.com/articles/VF32uye" target="_blank" rel="external">log4j和logback的冲突导致日志输出异常</a><br><a href="http://phl.iteye.com/blog/2021461" target="_blank" rel="external">JAVA日志组件系列(三)log4j+logback+slf4j的关系与调试</a><br><a href="http://www.cnblogs.com/yongze103/archive/2012/05/05/2484753.html" target="_blank" rel="external">Logback浅析</a></p>
<p>第二篇文章提到了这点：<br>只有logback配置文件即可，因为log4j的输出已经委托给了slf4j（通过log4j-over-slf4j），而slf4j的默认实现是logback。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/25/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/25/">25</a><span class="page-number current">26</span><a class="page-number" href="/page/27/">27</a><span class="space">&hellip;</span><a class="page-number" href="/page/39/">39</a><a class="extend next" rel="next" href="/page/27/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">John</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">195</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">35</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.2.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.1"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  



  




  

  

  

  

  

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>


  

  

  

  

  

  

  

  

</body>
</html>
